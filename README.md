# Flibusta Local Mirror

Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–ø–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –§–ª–∏–±—É—Å—Ç—ã —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π OPDS 1.2.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä–∫–æ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è [zlsl/flibusta](https://github.com/zlsl/flibusta) —Å —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏ –∏ –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–µ–π.

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞**: [https://github.com/Zeed80/flibusta_test](https://github.com/Zeed80/flibusta_test)

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- üìö –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–∏–≥ —Å –ø–æ–∏—Å–∫–æ–º –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º, —Å–±–æ—Ä–Ω–∏–∫–∞–º, –∞–≤—Ç–æ—Ä–∞–º, –∂–∞–Ω—Ä–∞–º
- üìñ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: fb2, docx, rtf, mobi, epub, txt, html, pdf, djvu
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –¥–ª—è fb2
- üìë –°–æ–∑–¥–∞–Ω–∏–µ "–∫–Ω–∏–∂–Ω—ã—Ö –ø–æ–ª–æ–∫" –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥, –∞–≤—Ç–æ—Ä–æ–≤ –∏ —Å–±–æ—Ä–Ω–∏–∫–æ–≤
- üê≥ –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å Docker Compose
- üì• –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –§–ª–∏–±—É—Å—Ç—ã (SQL —Ñ–∞–π–ª—ã, –æ–±–ª–æ–∂–∫–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ OPDS (v2.0)
- ‚ú® **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ OPDS 1.2** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –≤–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞
- üîÑ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å OPDS 1.0 –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- üìÑ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ (first, previous, next, last)
- üîç **–§–∞—Å–µ—Ç–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —è–∑—ã–∫—É –∏ —Ñ–æ—Ä–º–∞—Ç—É —Ñ–∞–π–ª–∞
- üîé **–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫** —Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∞–≤—Ç–æ—Ä—É –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
- üìä **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ MIME-—Ç–∏–ø–∞–º–∏ –∏ Dublin Core —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- üõ°Ô∏è **–£–ª—É—á—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π –∏ XSS
- ‚ö° **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—é** –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã

|![x](blob/x1.png)|![x](blob/x2.png)|![x](blob/x3.png)|![x](blob/x4.png)|
|---|---|---|---|
## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- –§–∞–π–ª—ã –¥–∞–º–ø–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –§–ª–∏–±—É—Å—Ç—ã (*.sql)
- –ê—Ä—Ö–∏–≤—ã –∫–Ω–∏–≥ –§–ª–∏–±—É—Å—Ç—ã (*.zip)

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
git clone https://github.com/Zeed80/flibusta_test.git
cd flibusta_test
chmod +x install.sh
./install.sh
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°**: Ubuntu 18.04+ –∏–ª–∏ Debian 10+
- **Docker**: –≤–µ—Ä—Å–∏—è 20.10 –∏–ª–∏ –≤—ã—à–µ
- **Docker Compose**: –≤–µ—Ä—Å–∏—è 2.0 –∏–ª–∏ –≤—ã—à–µ
- –ú–∏–Ω–∏–º—É–º 2 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
- –§–∞–π–ª—ã –¥–∞–º–ø–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –§–ª–∏–±—É—Å—Ç—ã (*.sql –∏–ª–∏ *.sql.gz)
- –ê—Ä—Ö–∏–≤—ã –∫–Ω–∏–≥ –§–ª–∏–±—É—Å—Ç—ã (*.zip)

### –°–ø–æ—Å–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

#### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (CLI) - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏:

```bash
git clone https://github.com/Zeed80/flibusta_test.git
cd flibusta_test
chmod +x install.sh
./install.sh
```

–° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:

```bash
./install.sh \
  --db-password "my_password" \
  --port 8080 \
  --sql-dir /path/to/sql \
  --books-dir /path/to/books \
  --auto-init \
  --download-sql \
  --download-covers \
  --update-library
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:**
- `--download-sql` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞—Ç—å SQL —Ñ–∞–π–ª—ã —Å –§–ª–∏–±—É—Å—Ç—ã
- `--download-covers` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞—Ç—å –æ–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥
- `--update-library` - —Å–∫–∞—á–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

#### 2. –ö–æ–Ω—Å–æ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (TUI) - –î–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø–∞–ø–æ–∫

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TUI-—É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø–∞–ø–æ–∫:

```bash
chmod +x install-tui.sh
./install-tui.sh
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** `dialog` –∏–ª–∏ `whiptail` (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: `sudo apt-get install dialog`)

**–í TUI —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã –æ–ø—Ü–∏–∏:**
- **–¢—Ä–∏ —Ä–µ–∂–∏–º–∞ –≤—ã–±–æ—Ä–∞ –ø–∞–ø–æ–∫:**
  1. **–§–∞–π–ª–æ–≤—ã–π –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω dialog) - –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –ø–æ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–∞–∫ –≤ —Ñ–∞–π–ª–æ–≤–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä–µ —Å–æ —Å—Ç—Ä–µ–ª–∫–∞–º–∏
  2. **–†—É—á–Ω–æ–π –≤–≤–æ–¥ –ø—É—Ç–∏** - –≤–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –≤—Ä—É—á–Ω—É—é
  3. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—É—Ç–∏** - –≤—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π (–ø–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞, –¥–æ–º–∞—à–Ω—è—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—É—Ç–∏)
  
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—É—Ç–µ–π:**
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å
  - üìÅ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  - üíæ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
  - üîÄ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤ –∏ –ø–∞—Ä–æ–ª–µ–π:**
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 27100)
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 27101)
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –∏–ª–∏ –≤–≤–æ–¥ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
  
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:**
  - –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ Docker
  - –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ (–≤ –º–µ–Ω—é "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏"):**
  - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
  - üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
  - ‚¨áÔ∏è **–°–∫–∞—á–∞—Ç—å SQL —Ñ–∞–π–ª—ã —Å –§–ª–∏–±—É—Å—Ç—ã** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
  - üì∑ **–°–∫–∞—á–∞—Ç—å –æ–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
  - üîÑ **–û–±–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É** (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

#### 3. –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ - –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
./quick_start.sh \
  --sql-dir /path/to/sql \
  --books-dir /path/to/books \
  --db-password "secure_password" \
  --auto-init
```

#### 4. –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ - –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö

> **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (CLI –∏–ª–∏ TUI) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.

##### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ:**
- **–û–°**: Ubuntu 18.04+, Debian 10+, Rocky Linux 8+, CentOS Stream 8+, –∏–ª–∏ –¥—Ä—É–≥–æ–π Linux –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤
- **Docker**: –≤–µ—Ä—Å–∏—è 20.10 –∏–ª–∏ –≤—ã—à–µ
- **Docker Compose**: –≤–µ—Ä—Å–∏—è 2.0 –∏–ª–∏ –≤—ã—à–µ (–∏–ª–∏ –ø–ª–∞–≥–∏–Ω docker compose)
- **–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ**: –º–∏–Ω–∏–º—É–º 10 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 20+ GB –¥–ª—è –ø–æ–ª–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
- **–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å**: –º–∏–Ω–∏–º—É–º 2 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4+ GB)
- **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä**: –º–∏–Ω–∏–º—É–º 2 —è–¥—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4+ —è–¥–µ—Ä)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –û–°
cat /etc/os-release

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Docker
docker --version
# –¢—Ä–µ–±—É–µ—Ç—Å—è: Docker version 20.10.x –∏–ª–∏ –≤—ã—à–µ

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Docker Compose
docker-compose --version
# –∏–ª–∏
docker compose version
# –¢—Ä–µ–±—É–µ—Ç—Å—è: Docker Compose v2.0.x –∏–ª–∏ –≤—ã—à–µ

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
df -h .
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 10 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏
free -h
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 4 GB RAM
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):**

–î–ª—è Ubuntu/Debian:
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –ø–∞–∫–µ—Ç–æ–≤
sudo apt-get update

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo apt-get install -y \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ GPG –∫–ª—é—á–∞ Docker
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Docker
echo \
  "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Engine
sudo apt-get update
sudo apt-get install -y docker-ce docker-ce-cli containerd.io

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo apt-get install -y docker-compose-plugin

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≥—Ä—É–ø–ø—ã
newgrp docker
```

–î–ª—è CentOS/Rocky Linux:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo yum install -y yum-utils

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Docker
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Engine
sudo yum install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# –ó–∞–ø—É—Å–∫ Docker
sudo systemctl start docker
sudo systemctl enable docker

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER
newgrp docker
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Docker
docker run hello-world

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Docker Compose
docker compose version
```

##### –®–∞–≥ 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/Zeed80/flibusta_test.git
cd flibusta_test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤
ls -la
```

**–û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
flibusta_test/
‚îú‚îÄ‚îÄ application/          # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ PHP
‚îú‚îÄ‚îÄ phpdocker/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Docker
‚îú‚îÄ‚îÄ docker-compose.yml   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose
‚îú‚îÄ‚îÄ .env.example        # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ install.sh          # –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ install-tui.sh      # –°–∫—Ä–∏–ø—Ç TUI —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îî‚îÄ‚îÄ scripts/            # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
```

##### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env –∏–∑ —à–∞–±–ª–æ–Ω–∞
cp .env.example .env
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ —Ñ–∞–π–ª–µ .env:**

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:
```bash
nano .env
# –∏–ª–∏
vim .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

```bash
# –ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π!)
FLIBUSTA_DBPASSWORD=–≤–∞—à_–Ω–∞–¥–µ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å_–∑–¥–µ—Å—å

# –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–∏–∑–º–µ–Ω–∏—Ç–µ, –µ—Å–ª–∏ –ø–æ—Ä—Ç 27100 –∑–∞–Ω—è—Ç)
FLIBUSTA_PORT=27100

# –ü–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–∏–∑–º–µ–Ω–∏—Ç–µ, –µ—Å–ª–∏ –ø–æ—Ä—Ç 27101 –∑–∞–Ω—è—Ç)
FLIBUSTA_DB_PORT=27101

# –í–µ—Ä—Å–∏—è PHP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8.2)
FLIBUSTA_PHP_VERSION=8.2
```

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å |
|-----------|----------|--------------|-------------------|
| `FLIBUSTA_DBUSER` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î | `flibusta` | ‚ùå |
| `FLIBUSTA_DBNAME` | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `flibusta` | ‚ùå |
| `FLIBUSTA_DBTYPE` | –¢–∏–ø –ë–î | `postgres` | ‚ùå |
| `FLIBUSTA_DBHOST` | –•–æ—Å—Ç –ë–î | `postgres` | ‚ùå |
| `FLIBUSTA_DBPASSWORD` | –ü–∞—Ä–æ–ª—å –ë–î | `flibusta` | ‚úÖ |
| `FLIBUSTA_WEBROOT` | –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `` (–ø—É—Å—Ç–æ) | ‚ùå |
| `FLIBUSTA_PORT` | –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ | `27100` | üî∂ (–µ—Å–ª–∏ –∑–∞–Ω—è—Ç) |
| `FLIBUSTA_DB_PORT` | –ü–æ—Ä—Ç –ë–î | `27101` | üî∂ (–µ—Å–ª–∏ –∑–∞–Ω—è—Ç) |
| `FLIBUSTA_PHP_VERSION` | –í–µ—Ä—Å–∏—è PHP | `8.2` | ‚ùå |

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è:**

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –¥–ª–∏–Ω–æ–π 32 —Å–∏–º–≤–æ–ª–∞
openssl rand -base64 24 | tr -d "=+/" | cut -c1-32

# –ò–ª–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Python 3
python3 -c "import secrets; print(secrets.token_urlsafe(32))"

# –ò–ª–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º /dev/urandom
cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1
```

–û–±–Ω–æ–≤–∏—Ç–µ `.env` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º:
```bash
sed -i "s/FLIBUSTA_DBPASSWORD=.*/FLIBUSTA_DBPASSWORD=–í–ê–®_–ù–û–í–´–ô_–ü–ê–†–û–õ–¨/" .env
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–µ–π –∫ –∫–Ω–∏–≥–∞–º –∏ SQL —Ñ–∞–π–ª–∞–º:**

–ï—Å–ª–∏ –≤–∞—à–∏ –∫–Ω–∏–≥–∏ –∏–ª–∏ SQL —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥—Ä—É–≥–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:

```bash
# –ü—É—Ç—å –∫ –∫–Ω–∏–≥–∞–º (–µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)
# –í–∞—Ä–∏–∞–Ω—Ç A: –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
FLIBUSTA_BOOKS_PATH=/media/external_drive/books

# –í–∞—Ä–∏–∞–Ω—Ç B: –°–∏–º–≤–æ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
ln -s /media/external_drive/books ./Flibusta.Net

# –ü—É—Ç—å –∫ SQL —Ñ–∞–π–ª–∞–º (–µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)
# –í–∞—Ä–∏–∞–Ω—Ç A: –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
FLIBUSTA_SQL_PATH=/media/external_drive/sql

# –í–∞—Ä–∏–∞–Ω—Ç B: –°–∏–º–≤–æ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞
ln -s /media/external_drive/sql ./FlibustaSQL
```

**–°–ø–æ—Å–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É—Ç–µ–π:**

1. **–ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   - –î–æ–±–∞–≤—å—Ç–µ `FLIBUSTA_BOOKS_PATH=/path/to/books`
   - –î–æ–±–∞–≤—å—Ç–µ `FLIBUSTA_SQL_PATH=/path/to/sql`
   - –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –ø—É—Ç–∏

2. **–ß–µ—Ä–µ–∑ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏**:
   ```bash
   # –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
   rm -rf Flibusta.Net FlibustaSQL
   ln -s /path/to/external/books Flibusta.Net
   ln -s /path/to/external/sql FlibustaSQL
   ```

3. **–ß–µ—Ä–µ–∑ docker-compose.yml** (–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ):
   ```yaml
   services:
       php-fpm:
           volumes:
               - './application:/application'
               - './cache:/application/cache'
               - '/path/to/external/books:/application/flibusta'  # –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–∏–≥
               - '/path/to/external/sql:/application/sql'      # –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ SQL —Ñ–∞–π–ª–æ–≤
   ```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö —Ç–æ–º–æ–≤ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ —ç—Ç–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la /path/to/external/books
ls -la /path/to/external/sql

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –∏–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–∞–≤–∞
chmod -R 755 /path/to/external/books
chmod -R 755 /path/to/external/sql
```
```

–û–±–Ω–æ–≤–∏—Ç–µ `.env` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º:
```bash
sed -i "s/FLIBUSTA_DBPASSWORD=.*/FLIBUSTA_DBPASSWORD=–í–ê–®_–ü–ê–†–û–õ–¨/" .env
```

##### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ Docker

**–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –ø–∞—Ä–æ–ª–µ–º –¥–ª—è Docker secrets:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
mkdir -p secrets

# –ó–∞–ø–∏—Å—å –ø–∞—Ä–æ–ª—è –≤ —Ñ–∞–π–ª —Å–µ–∫—Ä–µ—Ç–æ–≤
echo "–≤–∞—à_–Ω–∞–¥–µ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å" > secrets/flibusta_pwd.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chmod 600 secrets/flibusta_pwd.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ñ–∞–π–ª–∞ (uid 82 - —ç—Ç–æ www-data)
sudo chown 82:82 secrets/flibusta_pwd.txt
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:**
```bash
ls -la secrets/
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: -rw-------  82 82
```

##### –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

**–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –¥–∞–Ω–Ω—ã—Ö:**

```bash
# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ñ–∞–π–ª–æ–≤ –¥–∞–º–ø–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
mkdir -p FlibustaSQL/psql

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∞—Ä—Ö–∏–≤–æ–≤ –∫–Ω–∏–≥
mkdir -p Flibusta.Net

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∫—ç—à–∞
mkdir -p cache/{authors,covers,tmp}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
ls -la FlibustaSQL Flibusta.Net cache
```

##### –®–∞–≥ 6: –†–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –§–ª–∏–±—É—Å—Ç—ã

**–í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**

```bash
# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ SQL —Ñ–∞–π–ª–æ–≤ —Å –§–ª–∏–±—É—Å—Ç—ã
wget -r -l1 -nd -nc -A "*.sql,*.sql.gz" \
    https://flibusta.is/sql/ \
    -P FlibustaSQL/

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ –æ–±–ª–æ–∂–µ–∫
wget -P FlibustaSQL/ https://flibusta.is/sql/lib.a.attached.zip
wget -P FlibustaSQL/ https://flibusta.is/sql/lib.b.attached.zip

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ –∫–Ω–∏–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - —ç—Ç–æ –∑–∞–π–º–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)
# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∞—Ä—Ö–∏–≤ –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω—ã–µ –∞—Ä—Ö–∏–≤—ã —Å –§–ª–∏–±—É—Å—Ç—ã
wget http://flibusta.is/sql/f.n.fb2-000001-999999.zip -P Flibusta.Net/
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è**

```bash
# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ SQL —Ñ–∞–π–ª–æ–≤
chmod +x getsql.sh
./getsql.sh

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ–±–ª–æ–∂–µ–∫
chmod +x getcovers.sh
./getcovers.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–∞—á–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
ls -lh FlibustaSQL/*.sql*
ls -lh FlibustaSQL/*.zip
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –†—É—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ñ–∞–π–ª—ã –§–ª–∏–±—É—Å—Ç—ã:

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ SQL —Ñ–∞–π–ª–æ–≤
cp /–ø—É—Ç—å/–∫/–≤–∞—à–∏–º/sql/—Ñ–∞–π–ª–∞–º/*.sql FlibustaSQL/
cp /–ø—É—Ç—å/–∫/–≤–∞—à–∏–º/sql/—Ñ–∞–π–ª–∞–º/*.sql.gz FlibustaSQL/

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ –∫–Ω–∏–≥
cp /–ø—É—Ç—å/–∫/–≤–∞—à–∏–º/–∞—Ä—Ö–∏–≤–∞–º/–∫–Ω–∏–≥/*.zip Flibusta.Net/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chmod 644 FlibustaSQL/*.sql*
chmod 644 Flibusta.Net/*.zip
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL —Ñ–∞–π–ª–æ–≤
ls -lh FlibustaSQL/ | grep -E "\.sql"
# –û–∂–∏–¥–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã: lib.libbook.sql, lib.libavtorname.sql –∏ —Ç.–¥.

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ –∫–Ω–∏–≥
ls -lh Flibusta.Net/ | grep -E "\.zip"
# –û–∂–∏–¥–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã: f.n.fb2-*.zip –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∞—Ä—Ö–∏–≤—ã
```

##### –®–∞–≥ 7: –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤

**–°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:**

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ Docker Compose
docker-compose build

# –ò–ª–∏ —Å –ø–ª–∞–≥–∏–Ω–æ–º docker compose
docker compose build
```

**–ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-15 –º–∏–Ω—É—Ç**, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã (nginx:alpine, postgres:16, php:8.2-fpm-alpine)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã PHP (gd, bz2, pdo_pgsql, zip)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PHP-FPM –∏ Nginx

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤
docker images | grep flibusta

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
# flibusta_test-postgres   latest
# flibusta_test-php-fpm    latest
# flibusta_test-webserver   latest
```

##### –®–∞–≥ 8: –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

**–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:**

```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –ò–ª–∏ —Å –ø–ª–∞–≥–∏–Ω–æ–º docker compose
docker compose up -d
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –û–∂–∏–¥–∞–µ–º—ã–π —Å—Ç–∞—Ç—É—Å: Up (running)
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
NAME                   IMAGE                    STATUS
flibusta_postgres_1     flibusta_test-postgres   Up X seconds
flibusta_php-fpm_1      flibusta_test-php-fpm    Up X seconds
flibusta_webserver_1     flibusta_test-webserver   Up X seconds
```

##### –®–∞–≥ 9.5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–∫–∏ "–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É":**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ tools/
docker-compose exec -T php-fpm sh -c "chmod +x /application/tools/*.sh /application/tools/app_topg /application/tools/*.py"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
docker-compose exec -T php-fpm ls -la /application/tools/
# –í—Å–µ .sh —Ñ–∞–π–ª—ã, app_topg –∏ .py —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ -rwxr-xr-x
```

**–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É" –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `install.sh` —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
docker-compose logs postgres
docker-compose logs php-fpm
docker-compose logs webserver
```

##### –®–∞–≥ 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
docker inspect flibusta_postgres_1 | grep -A 10 Health
docker inspect flibusta_php-fpm_1 | grep -A 10 Health
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ PostgreSQL
docker-compose exec postgres pg_isready -U flibusta -d flibusta

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
docker-compose exec postgres psql -U flibusta -d flibusta -c "\l"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ curl
curl -I http://localhost:27100

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: HTTP/1.1 200 OK
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:**

–û—Ç–∫—Ä–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **–û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: http://localhost:27100
- **OPDS –∫–∞—Ç–∞–ª–æ–≥**: http://localhost:27100/opds/
- **–°–µ—Ä–≤–∏—Å**: http://localhost:27100/service/

##### –®–∞–≥ 10: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–í–∞—Ä–∏–∞–Ω—Ç A: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:27100/service/
2. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –∫—Ä–∞—Å–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   docker-compose exec -T php-fpm sh -c "chmod +x /application/tools/*.sh /application/tools/app_topg"
   ```
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É"**
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-60 –º–∏–Ω—É—Ç)
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–µ—Ä–≤–∏—Å–∞

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É**

```bash
# –ò–º–ø–æ—Ä—Ç SQL —Ñ–∞–π–ª–æ–≤
docker-compose exec php-fpm bash /application/tools/app_import_sql.sh

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–º–ø–æ—Ä—Ç–∞
docker-compose logs -f php-fpm
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞**

```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
chmod +x scripts/init_database.sh
./scripts/init_database.sh
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–Ω–∏–≥
docker-compose exec postgres psql -U flibusta -d flibusta \
    -c "SELECT COUNT(*) as total_books FROM libbook;"

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—ã—Å—è—á –∫–Ω–∏–≥
```

##### –®–∞–≥ 11: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ ZIP-–∞—Ä—Ö–∏–≤–æ–≤:**

```bash
# –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ZIP-–∞—Ä—Ö–∏–≤–æ–≤ –∫–Ω–∏–≥
docker-compose exec php-fpm php /application/tools/app_reindex.sh

# –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: –°–µ—Ä–≤–∏—Å ‚Üí –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ZIP
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:27100/service/
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª—ã:
   - **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥, —Ä–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–∞, —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞
   - **–û–ø–µ—Ä–∞—Ü–∏–∏**: –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞, —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

##### –®–∞–≥ 12: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ–∫—Ä–µ—Ç–∞–º
ls -la secrets/

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: -rw------- (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤
sudo netstat -tuln | grep 2710

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
# tcp  0  0  0.0.0.0:27100  0.0.0.0:*  LISTEN  (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
# tcp  0  0  0.0.0.0:27101  0.0.0.0:*  LISTEN  (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
nano .env
# –û–±–Ω–æ–≤–∏—Ç–µ FLIBUSTA_DBPASSWORD

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –≤ PostgreSQL
docker-compose exec postgres psql -U postgres \
    -c "ALTER USER flibusta PASSWORD '–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å';"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose restart
```

##### –®–∞–≥ 13: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ systemd service –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
sudo nano /etc/systemd/system/flibusta.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `flibusta.service`:
```ini
[Unit]
Description=Flibusta Local Mirror
After=docker.service
Requires=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/–ø—É—Ç—å/–∫/flibusta_test
ExecStart=/usr/local/bin/docker-compose up -d
ExecStop=/usr/local/bin/docker-compose down
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
```

**–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞:**

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ systemd
sudo systemctl daemon-reload

# –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
sudo systemctl enable flibusta.service

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl start flibusta.service

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status flibusta.service
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (cron):**

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ crontab
crontab -e

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ 2:00 –Ω–æ—á–∏
0 2 * * * cd /–ø—É—Ç—å/–∫/flibusta_test && ./update_daily.sh >> /var/log/flibusta_update.log 2>&1

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SQL —Ñ–∞–π–ª–æ–≤ –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00 –Ω–æ—á–∏
0 3 * * 0 cd /–ø—É—Ç—å/–∫/flibusta_test && ./getsql.sh && docker-compose exec php-fpm bash /application/tools/app_import_sql.sh >> /var/log/flibusta_update.log 2>&1
```

##### –®–∞–≥ 14: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º/flibusta

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –±—ç–∫–∞–ø–∞
nano /usr/local/bin/flibusta_backup.sh
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞ `flibusta_backup.sh`:
```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è Flibusta

BACKUP_DIR="/–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º/flibusta"
DATE=$(date +%Y%m%d_%H%M%S)
PROJECT_DIR="/–ø—É—Ç—å/–∫/flibusta_test"

# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec -T postgres pg_dump -U flibusta flibusta > "$BACKUP_DIR/flibusta_db_$DATE.sql"

# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp "$PROJECT_DIR/.env" "$BACKUP_DIR/.env_$DATE.bak"
cp "$PROJECT_DIR/secrets/flibusta_pwd.txt" "$BACKUP_DIR/flibusta_pwd_$DATE.bak"

# –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ —Ñ–∞–π–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö
tar -czf "$BACKUP_DIR/flibusta_data_$DATE.tar.gz" \
    -C "$PROJECT_DIR" \
    FlibustaSQL/ \
    Flibusta.Net/ \
    cache/

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤ (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
find "$BACKUP_DIR" -name "flibusta_*" -mtime +30 -delete

echo "–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: $DATE"
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –±—ç–∫–∞–ø–∞:**

```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x /usr/local/bin/flibusta_backup.sh

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ crontab (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 1:00 –Ω–æ—á–∏)
crontab -e
0 1 * * * /usr/local/bin/flibusta_backup.sh
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞:**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose down

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose up -d postgres
sleep 10
docker-compose exec -T postgres psql -U flibusta flibusta < /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º/flibusta_db_20240101.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º/.env_20240101.bak .env
cp /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º/flibusta_pwd_20240101.bak secrets/flibusta_pwd.txt

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
tar -xzf /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º/flibusta_data_20240101.tar.gz

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose up -d
```

##### –®–∞–≥ 15: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs --tail=50

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
docker-compose exec postgres pg_isready -U flibusta -d flibusta

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec postgres psql -U flibusta -d flibusta \
    -c "SELECT pg_size_pretty(pg_database_size('flibusta'));"

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–Ω–∏–≥
docker-compose exec postgres psql -U flibusta -d flibusta \
    -c "SELECT COUNT(*) FROM libbook;"

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
curl -s -o /dev/null -w "%{http_code}" http://localhost:27100
# –û–∂–∏–¥–∞–µ—Ç—Å—è: 200

# 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ OPDS
curl -s -o /dev/null -w "%{http_code}" http://localhost:27100/opds/
# –û–∂–∏–¥–∞–µ—Ç—Å—è: 200
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:**

1. ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω: http://localhost:27100
2. ‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–π—Ç–∏ "–¢–æ–ª—Å—Ç–æ–π")
3. ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å FB2)
4. ‚úÖ OPDS –∫–∞—Ç–∞–ª–æ–≥ –¥–æ—Å—Ç—É–ø–µ–Ω: http://localhost:27100/opds/
5. ‚úÖ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–¥–æ–±–∞–≤—å—Ç–µ –∫–Ω–∏–≥—É –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ)
6. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–°–µ—Ä–≤–∏—Å")

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞
time curl http://localhost:27100/ > /dev/null

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats flibusta_php-fpm_1 flibusta_postgres_1 flibusta_webserver_1
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**

```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
chmod +x scripts/verify_installation.sh
./scripts/verify_installation.sh
```

##### –®–∞–≥ 16: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (SSL):**

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è HTTPS —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ (nginx/apache):

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ certbot
sudo apt-get install certbot python3-certbot-nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot --nginx -d –≤–∞—à.–¥–æ–º–µ–Ω.–∫–æ–º

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏ –≤ nginx
sudo nano /etc/nginx/sites-available/flibusta
```

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx:
```nginx
server {
    listen 80;
    server_name –≤–∞—à.–¥–æ–º–µ–Ω.–∫–æ–º;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name –≤–∞—à.–¥–æ–º–µ–Ω.–∫–æ–º;

    ssl_certificate /etc/letsencrypt/live/–≤–∞—à.–¥–æ–º–µ–Ω.–∫–æ–º/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/–≤–∞—à.–¥–æ–º–µ–Ω.–∫–æ–º/privkey.pem;

    location / {
        proxy_pass http://localhost:27100;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall:**

```bash
# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ UFW
sudo ufw allow 27100/tcp
sudo ufw allow 27101/tcp

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ UFW
sudo ufw status
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
sudo mkdir -p /var/log/flibusta

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
sudo nano /etc/logrotate.d/flibusta
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `/etc/logrotate.d/flibusta`:
```
/var/log/flibusta/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0644 www-data www-data
}
```

---

**–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏**

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —ç—Ç–∏—Ö —à–∞–≥–æ–≤ Flibusta Local Mirror –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:

- ‚úÖ Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å–æ–±—Ä–∞–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –î–∞–Ω–Ω—ã–µ –§–ª–∏–±—É—Å—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ OPDS –∫–∞—Ç–∞–ª–æ–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [docs/INSTALL.md](docs/INSTALL.md)

### –ü–æ—à–∞–≥–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è)

#### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/Zeed80/flibusta_test.git
cd flibusta_test
```

#### 2. –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
chmod +x install.sh
./install.sh
```

**TUI —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Å –≤—ã–±–æ—Ä–æ–º –ø–∞–ø–æ–∫):**
```bash
chmod +x install-tui.sh
./install-tui.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –°–æ–∑–¥–∞—Å—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä–æ–ª—å (–∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (.env)
- **–°–∫–∞—á–∞–µ—Ç SQL —Ñ–∞–π–ª—ã, –æ–±–ª–æ–∂–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
- –ó–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)

#### 3. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –§–ª–∏–±—É—Å—Ç—ã

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –§–ª–∏–±—É—Å—Ç—ã:

```bash
# –í –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –æ—Ç–≤–µ—Ç—å—Ç–µ "–î–∞" –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã 7-9
./install.sh

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
./install.sh --download-sql --download-covers --update-library
```

**–ß—Ç–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è:**
- **SQL —Ñ–∞–π–ª—ã** (`--download-sql`): –≤—Å–µ —Ñ–∞–π–ª—ã –¥–∞–º–ø–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å `flibusta.is/sql/`
- **–û–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥** (`--download-covers`): –∞—Ä—Ö–∏–≤—ã –æ–±–ª–æ–∂–µ–∫ `lib.a.attached.zip` –∏ `lib.b.attached.zip`
- **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** (`--update-library`): –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å `flibusta.is/daily/`

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ**

**–§–∞–π–ª—ã –¥–∞–º–ø–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
- –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã `*.sql` –∏–ª–∏ `*.sql.gz` –≤ –∫–∞—Ç–∞–ª–æ–≥ `FlibustaSQL/`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã: `lib.*.sql`, `lib.*.sql.gz`

**–ê—Ä—Ö–∏–≤—ã –∫–Ω–∏–≥:**
- –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –∞—Ä—Ö–∏–≤—ã `*.zip` –≤ –∫–∞—Ç–∞–ª–æ–≥ `Flibusta.Net/`
- –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–º –§–ª–∏–±—É—Å—Ç–æ–π

**–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:**
```bash
./install.sh --sql-dir /path/to/sql --books-dir /path/to/books
```

#### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
./scripts/verify_installation.sh
```

–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: http://localhost:27100
- **OPDS –∫–∞—Ç–∞–ª–æ–≥**: http://localhost:27100/opds/
- **OpenSearch**: http://localhost:27100/opds-opensearch.xml.php

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ü–∞—Ä–æ–ª—å –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `secrets/flibusta_pwd.txt`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–ø—Ü–∏–π `--download-sql`, `--download-covers` –∏–ª–∏ `--update-library` —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –§–ª–∏–±—É—Å—Ç—ã. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.
- –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–∞–ø–∫–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ë–î, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã `getsql.sh`, `getcovers.sh`, `update_daily.sh`
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSD –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ: [docs/INSTALL.md](docs/INSTALL.md)

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ `docker-compose.yml`. 

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|----------|--------------|
| `FLIBUSTA_DBUSER` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `flibusta` |
| `FLIBUSTA_DBNAME` | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `flibusta` |
| `FLIBUSTA_DBTYPE` | –¢–∏–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `postgres` |
| `FLIBUSTA_DBHOST` | –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `postgres` |
| `FLIBUSTA_DBPASSWORD` | –ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `flibusta` |
| `FLIBUSTA_WEBROOT` | –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `` (–ø—É—Å—Ç–æ) |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OPDS

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OPDS –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö `application/opds/`. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ**: –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π `OPDS_FEED_COUNT` –≤ `application/init.php` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 100)
- **–í–µ—Ä—Å–∏—è OPDS**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ User-Agent –∫–ª–∏–µ–Ω—Ç–∞
- **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è**: –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `?opds_version=1.0` –∏–ª–∏ `?opds_version=1.2` –∫ URL

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª–µ–π

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: Docker Compose –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –≤ –∫–æ–¥–µ.

–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ö–∞–Ω–∏–∑–º `secrets`:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø–∞—Ä–æ–ª–µ–º:
```bash
echo "your_secure_password" > secrets/flibusta_pwd.txt
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
```bash
# –î–ª—è Linux/Mac
sudo chown 82:82 secrets/flibusta_pwd.txt
chmod 600 secrets/flibusta_pwd.txt

# –î–ª—è Windows (–≤ PowerShell –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
icacls secrets\flibusta_pwd.txt /grant:r "82:(R)"
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å ID 82 - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `www-data` –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ PHP-FPM.  
   
## üÜï –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ OPDS 2.0

### –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ OPDS 1.2

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ OPDS 1.2 —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:

- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ namespace –∏ profile –∞—Ç—Ä–∏–±—É—Ç—ã
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (dc:language, dc:subject, opds:numberOfItems)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ MIME-—Ç–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Å—ã–ª–æ–∫

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ—Ä—Å–∏—é OPDS –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ User-Agent –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ–∏–¥:

- **OPDS 1.2** –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (Calibre, KOReader, Aldiko)
- **OPDS 1.0** –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (FBReader, Moon+ Reader)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –Ω–∞ OPDS 1.2 –µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è

–í—Å–µ —Å–ø–∏—Å–∫–∏ –∫–Ω–∏–≥ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –ø–∞–≥–∏–Ω–∞—Ü–∏—é:

- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏: first, previous, next, last
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è OPDS 1.2 (numberOfItems, itemsPerPage)
- –ü–∞—Ä–∞–º–µ—Ç—Ä `?page=N` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

**–ü—Ä–∏–º–µ—Ä:**
```
http://localhost:27100/opds/list/?page=2
http://localhost:27100/opds/list/?author_id=123&page=3
```

### –§–∞—Å–µ—Ç–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–Ω–∏–≥ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º (—Ç–æ–ª—å–∫–æ –¥–ª—è OPDS 1.2):

- **–ü–æ —è–∑—ã–∫—É**: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —è–∑—ã–∫—É –∫–Ω–∏–≥–∏
- **–ü–æ —Ñ–æ—Ä–º–∞—Ç—É**: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É —Ñ–∞–π–ª–∞ (fb2, epub, pdf –∏ —Ç.–¥.)
- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ñ–∏–¥–µ

**–ü—Ä–∏–º–µ—Ä:**
```
http://localhost:27100/opds/list/?lang=ru
http://localhost:27100/opds/list/?format=epub
```

### –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫

–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º:

- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–Ω–∏–≥–∏
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∞
- –ü–æ–∏—Å–∫ –ø–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PostgreSQL ILIKE –¥–ª—è –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É –ø–æ–∏—Å–∫–∞

**–ü—Ä–∏–º–µ—Ä:**
```
http://localhost:27100/opds/search?q=—Ç–æ–ª—Å—Ç–æ–π
http://localhost:27100/opds/search?by=author&q=–ø—É—à–∫–∏–Ω
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

–£–ª—É—á—à–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏:

- **Dublin Core —ç–ª–µ–º–µ–Ω—Ç—ã**: dc:language, dc:subject, dc:format, dc:issued
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ MIME-—Ç–∏–ø—ã**: 
  - `application/fb2+zip` –¥–ª—è FB2
  - `application/epub+zip` –¥–ª—è EPUB
  - `application/x-mobipocket-ebook` –¥–ª—è MOBI
  - –ò –¥—Ä—É–≥–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: dcterms:extent —Å —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º

### –£–ª—É—á—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

- ‚úÖ –í—Å–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç prepared statements
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π –∏ XSS –∞—Ç–∞–∫

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—é

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–ª–∞—Å—Å `OPDSCache` –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∏–¥–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ETag –∏ Last-Modified –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ OPDS API

```
/opds/                    - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
/opds/list/               - –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
/opds/list/?genre_id=N    - –ö–Ω–∏–≥–∏ –ø–æ –∂–∞–Ω—Ä—É
/opds/list/?author_id=N   - –ö–Ω–∏–≥–∏ –∞–≤—Ç–æ—Ä–∞
/opds/list/?seq_id=N      - –ö–Ω–∏–≥–∏ —Å–µ—Ä–∏–∏
/opds/search?q=query      - –ü–æ–∏—Å–∫ –∫–Ω–∏–≥
/opds/search?by=author&q=query - –ü–æ–∏—Å–∫ –∞–≤—Ç–æ—Ä–æ–≤
/opds/genres              - –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∂–∞–Ω—Ä–æ–≤
/opds/authorsindex        - –ò–Ω–¥–µ–∫—Å –∞–≤—Ç–æ—Ä–æ–≤
/opds/sequencesindex      - –ò–Ω–¥–µ–∫—Å —Å–µ—Ä–∏–π
/opds/favs                - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–æ–∫
/opds/fav?uuid=...        - –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/opds/author?author_id=N  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∞
```

## üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Docker Compose –ø–æ–¥–Ω–∏–º–∞–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–µ—Ä–∫–∞–ª–∞ –§–ª–∏–±—É—Å—Ç—ã. 

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ NAS) –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞.

–ü–∞–ø–∫–∞ `application/tools/external_services_config` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ —Ç–∞–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [README](application/tools/external_services_config/README.md).

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ä—Ç–∞–ª**: http://localhost:27100
- **OPDS –∫–∞—Ç–∞–ª–æ–≥**: http://localhost:27100/opds/
- **OpenSearch –æ–ø–∏—Å–∞–Ω–∏–µ**: http://localhost:27100/opds-opensearch.xml.php

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ OPDS –∫–ª–∏–µ–Ω—Ç–æ–≤

#### Calibre
1. –û—Ç–∫—Ä–æ–π—Ç–µ Calibre
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥–∏" ‚Üí "–ü–æ —Å–µ—Ç–∏" ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥"
3. –í–≤–µ–¥–∏—Ç–µ URL: `http://localhost:27100/opds/`
4. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"

#### FBReader
1. –û—Ç–∫—Ä–æ–π—Ç–µ FBReader
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ö–∞—Ç–∞–ª–æ–≥–∏" ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥"
3. –í–≤–µ–¥–∏—Ç–µ URL: `http://localhost:27100/opds/`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

#### Moon+ Reader
1. –û—Ç–∫—Ä–æ–π—Ç–µ Moon+ Reader
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞" ‚Üí "OPDS"
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥: `http://localhost:27100/opds/`

#### KOReader
1. –û—Ç–∫—Ä–æ–π—Ç–µ KOReader
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ü–æ–∏—Å–∫" ‚Üí "OPDS –∫–∞—Ç–∞–ª–æ–≥–∏"
3. –î–æ–±–∞–≤—å—Ç–µ: `http://localhost:27100/opds/`

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
# –°–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ SQL —Ñ–∞–π–ª—ã
./getsql.sh

# –°–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–±–ª–æ–∂–∫–∏
./getcovers.sh

# –°–∫–∞—á–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
./update_daily.sh
```

**–†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
1. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–∞–º–ø–∞ (*.sql –∏–ª–∏ *.sql.gz) –≤ `FlibustaSQL`
2. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–µ –∞—Ä—Ö–∏–≤—ã (*.zip) –≤ `Flibusta.Net`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: `docker-compose restart`
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã" —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–º–µ–Ω—é "–°–µ—Ä–≤–∏—Å")

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç—ã `getsql.sh`, `getcovers.sh` –∏ `update_daily.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–æ–∫–∞—á–∫—É –ø—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
–ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: –º–µ–Ω—é "–°–µ—Ä–≤–∏—Å" ‚Üí "–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à"

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
docker-compose exec php-fpm rm -rf /application/cache/authors/* /application/cache/covers/*
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ http://localhost:27100/service/ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞.

**–ü—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

1. **–°–∫—Ä–∏–ø—Ç—ã –Ω–µ –∏–º–µ—é—Ç –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞):**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
docker-compose exec -T php-fpm sh -c "chmod +x /application/tools/*.sh /application/tools/app_topg /application/tools/*.py"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
docker-compose exec php-fpm ls -la /application/tools/
```
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ `.sh` —Ñ–∞–π–ª—ã, `app_topg` –∏ `.py` —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ `-rwxr-xr-x`.

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É http://localhost:27100/service/ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –∫—Ä–∞—Å–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∏–∑ –ø.1
   - –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∞–≤ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É" –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–π

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–º–ø–æ—Ä—Ç–∞:**
```bash
# –§–∞–π–ª —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ–ø–µ—Ä—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ cache –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
docker-compose exec php-fpm cat /application/cache/sql_status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é cache
docker-compose exec php-fpm ls -la /application/cache/
```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ PHP-FPM:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—à–∏–±–æ–∫
docker-compose logs php-fpm --tail=100
```

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –∏–º–ø–æ—Ä—Ç–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–º–ø–æ—Ä—Ç–∞
docker-compose exec php-fpm ps aux | grep -E 'app_import|app_reindex|app_topg'
```

6. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
docker-compose exec php-fpm ls -la /application/sql/
docker-compose exec php-fpm ls -la /application/cache/
docker-compose exec php-fpm ls -la /application/cache/tmp/
```

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–µ—Ä–≤–∏—Å–∞:**
–ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫—Ä–∞—Å–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º:
- "–°–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω"
- "–°–∫—Ä–∏–ø—Ç –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ"
- "–°–∫—Ä–∏–ø—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ SQL –Ω–µ –Ω–∞–π–¥–µ–Ω"

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ PHP –Ω–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–∞–Ω–¥—ã. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤—ã—à–µ.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `install.sh` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –æ–±—Ä–∞–∑–æ–≤ Docker

**–û—à–∏–±–∫–∞ "TLS handshake timeout" –ø—Ä–∏ `docker-compose up -d`:**

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ç—å—é –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫ Docker Hub.

**–†–µ—à–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É:**
```bash
ping registry-1.docker.io
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è Docker (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏):**
```bash
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json > /dev/null <<EOF
{
  "proxies": {
    "http-proxy": "http://proxy.example.com:8080",
    "https-proxy": "http://proxy.example.com:8080",
    "no-proxy": "localhost,127.0.0.1"
  }
}
EOF
sudo systemctl restart docker
```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º):**
```bash
sudo tee /etc/docker/daemon.json > /dev/null <<EOF
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com"
  ]
}
EOF
sudo systemctl restart docker
```

4. **–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É:**
```bash
docker-compose pull
docker-compose up -d
```

5. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±—Ä–∞–∑—ã –≤—Ä—É—á–Ω—É—é:**
```bash
docker pull nginx:alpine
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ PostgreSQL
docker-compose logs postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose restart
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–æ–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã `*.sql` –∏–ª–∏ `*.sql.gz` –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `FlibustaSQL/`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ `FlibustaSQL`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–º–µ–Ω—é "–°–µ—Ä–≤–∏—Å")

### –ü—Ä–æ–±–ª–µ–º—ã —Å OPDS –∫–ª–∏–µ–Ω—Ç–∞–º–∏

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL: `http://localhost:27100/opds/`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 27100 –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –≤–µ—Ä—Å–∏–∏: `?opds_version=1.0` –∏–ª–∏ `?opds_version=1.2`

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSD –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ `docker-compose.yml`
- –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OPDS](application/opds/README.md) - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ OPDS —Ñ—É–Ω–∫—Ü–∏–π
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤](application/tools/external_services_config/README.md) - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- [–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)](docs/FAQ.md) - –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫](docs/TROUBLESHOOTING.md) - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

## üóëÔ∏è –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞, –∫–Ω–∏–≥–∏ (Flibusta.Net) **–ù–ò–ö–û–ì–î–ê** –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. SQL —Ñ–∞–π–ª—ã (FlibustaSQL) —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å –æ–ø—Ü–∏–µ–π `--remove-sql`. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –∫–Ω–∏–≥–∏ —á–∞—Å—Ç–æ –∑–∞–Ω–∏–º–∞—é—Ç –¥–µ—Å—è—Ç–∫–∏ –ì–ë –∏ –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö –¥–∏—Å–∫–∞—Ö.

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
./uninstall.sh --help

# –ë—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –æ–±—Ä–∞–∑—ã, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
./uninstall.sh

# –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –æ–±—Ä–∞–∑—ã, volumes, config, cache, SQL)
./uninstall.sh --all
```

**–û–ø—Ü–∏–∏:**
- `--remove-images` - Docker –æ–±—Ä–∞–∑—ã
- `--remove-volumes` - Docker volumes (–ë–î!)
- `--remove-config` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env, secrets)
- `--remove-cache` - –ö—ç—à (cache/)
- `--remove-sql` - SQL —Ñ–∞–π–ª—ã (FlibustaSQL/)
- `--all` - –í—Å—ë –∫—Ä–æ–º–µ –∫–Ω–∏–≥

**–ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
| –û–ø—Ü–∏—è | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã | –û–±—Ä–∞–∑—ã | Volumes | Config | Cache | SQL —Ñ–∞–π–ª—ã |
|--------|------------|---------|----------|---------|-------|------------|
| –ë–µ–∑ –æ–ø—Ü–∏–π | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| --all | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |

**–ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é:**
- ‚ö†Ô∏è **–ö–Ω–∏–≥–∏** (`Flibusta.Net/`) - –ù–ò–ö–û–ì–î–ê –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
BACKUP_DIR=~/flibusta_backup_$(date +%Y%m%d)
mkdir -p "$BACKUP_DIR"

# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec -T postgres pg_dump -U flibusta flibusta > "$BACKUP_DIR/flibusta_db.sql"

# –ë—ç–∫–∞–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env "$BACKUP_DIR/"
cp -r secrets "$BACKUP_DIR/"

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–µ —Å–∞–º–∏—Ö —Ñ–∞–π–ª–æ–≤)
ls -la Flibusta.Net/ > "$BACKUP_DIR/books_list.txt"
ls -la FlibustaSQL/ > "$BACKUP_DIR/sql_files_list.txt"

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ volumes
docker-compose down -v
docker images | grep flibusta | awk '{print $3}' | xargs docker rmi 2>/dev/null || true

# ‚ö†Ô∏è  –ö–Ω–∏–≥–∏ –∏ SQL —Ñ–∞–π–ª—ã –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
# –£–¥–∞–ª–∏—Ç–µ –∏—Ö –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:
rm -rf Flibusta.Net FlibustaSQL
rm -rf flibusta_test
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –£–¥–∞–ª–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è):

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
mkdir -p ~/flibusta_saved
cd ~/flibusta_saved

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec -T postgres pg_dump -U flibusta flibusta > flibusta_db.sql

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp ~/flibusta_test/.env .
cp -r ~/flibusta_test/secrets .

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∫–Ω–∏–≥–∏ –∏ SQL —Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è)
cd ..
docker-compose down -v
docker-compose down --rmi all -v
rm -rf flibusta_test

echo "–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: ~/flibusta_saved"
echo "‚ö†Ô∏è  –ö–Ω–∏–≥–∏ –∏ SQL —Ñ–∞–π–ª—ã –æ—Å—Ç–∞–ª–∏—Å—å –≤ ~/flibusta_test"
echo "    –£–¥–∞–ª–∏—Ç–µ –≤—Ä—É—á–Ω—É—é: rm -rf ~/flibusta_test/Flibusta.Net ~/flibusta_test/FlibustaSQL"
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –£–¥–∞–ª–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º systemd

–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–ª—É–∂–±—ã
sudo systemctl stop flibusta.service
sudo systemctl disable flibusta.service
sudo rm /etc/systemd/system/flibusta.service
sudo systemctl daemon-reload

# –£–¥–∞–ª–µ–Ω–∏–µ crontab –∑–∞–¥–∞—á (–µ—Å–ª–∏ –µ—Å—Ç—å)
crontab -e  # –£–¥–∞–ª–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å flibusta

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ç–∞
cd ~/flibusta_test
docker-compose down -v
cd ..

# ‚ö†Ô∏è  –ö–Ω–∏–≥–∏ –∏ SQL —Ñ–∞–π–ª—ã - —Ä—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ –≤–∞—à–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é
rm -rf flibusta_test/Flibusta.Net FlibustaSQL
rm -rf flibusta_test
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–¥–∞–ª–µ–Ω—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps -a | grep flibusta
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∫–∞–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker images | grep flibusta
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∫–∞–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

# –ü—Ä–æ–≤–µ—Ä–∫–∞ volumes
docker volume ls | grep flibusta
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∫–∞–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
ls -la ~/flibusta_test 2>&1
# –û—à–∏–±–∫–∞: No such file or directory (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è)

# ‚ö†Ô∏è  –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–∏–≥ (–ù–ï —É–¥–∞–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
ls -la ~/flibusta_test/Flibusta.Net 2>&1  # –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ö–Ω–∏–≥–∏ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL —Ñ–∞–π–ª–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ --remove-sql –∏–ª–∏ --all)
ls -la ~/flibusta_test/FlibustaSQL 2>&1  # –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ --remove-sql

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
sudo netstat -tuln | grep 2710
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/Zeed80/flibusta_test.git
cd flibusta_test

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp ~/flibusta_backup_YYYYMMDD/.env .
cp -r ~/flibusta_backup_YYYYMMDD/secrets .

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)
cp -r ~/flibusta_backup_YYYYMMDD/FlibustaSQL .
cp -r ~/flibusta_backup_YYYYMMDD/Flibusta.Net .

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose build
docker-compose up -d

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec -T postgres psql -U flibusta -d flibusta < ~/flibusta_backup_YYYYMMDD/flibusta_db_backup.sql
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ù–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ï—Å–ª–∏ –≤—ã –Ω–µ —Å–æ–∑–¥–∞–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–æ–≤—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É:

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/Zeed80/flibusta_test.git
cd flibusta_test

# –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
chmod +x install.sh
./install.sh
```

–°–º. —Ä–∞–∑–¥–µ–ª "–£—Å—Ç–∞–Ω–æ–≤–∫–∞" –≤—ã—à–µ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏

#### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è

```bash
docker-compose kill
docker-compose down -v
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –û–±—Ä–∞–∑—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è

```bash
docker stop $(docker ps -aq)
docker rm $(docker ps -aq)
docker rmi -f $(docker images | grep flibusta | awk '{print $3}')
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –§–∞–π–ª—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è

```bash
sudo chown -R $USER:$USER ~/flibusta_test
sudo rm -rf ~/flibusta_test
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –∑–∞–Ω—è—Ç—ã

```bash
sudo lsof -i :27100
sudo lsof -i :27101
sudo kill -9 <PID>
docker network prune -f
```

### –û—á–∏—Å—Ç–∫–∞ Docker –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

```bash
docker container prune -a -f
docker image prune -a -f
docker volume prune -f
docker network prune -f
docker system df
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: `docker system prune -a --volumes` —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ Docker. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é!

### –ß–∞—Å—Ç–∏—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```bash
# –¢–æ–ª—å–∫–æ –ë–î
docker-compose stop postgres; docker-compose down -v; docker-compose up -d postgres

# –¢–æ–ª—å–∫–æ –∫—ç—à
rm -rf cache/*; docker-compose restart php-fpm

# –¢–æ–ª—å–∫–æ SQL —Ñ–∞–π–ª—ã (–≤—Ä—É—á–Ω—É—é!)
rm -rf FlibustaSQL/*

# –¢–æ–ª—å–∫–æ –∫–Ω–∏–≥–∏ (–≤—Ä—É—á–Ω—É—é!)
rm -rf Flibusta.Net/*
```

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

- [ ] –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] **–ö–Ω–∏–≥–∏ (Flibusta.Net) –ù–ò–ö–û–ì–î–ê –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
- [ ] **SQL —Ñ–∞–π–ª—ã (FlibustaSQL) —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å –æ–ø—Ü–∏–µ–π --remove-sql**
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ù–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 27100/27101

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose down

# –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git pull https://github.com/Zeed80/flibusta_test.git main

# –ò–ª–∏ –µ—Å–ª–∏ remote —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:
git pull origin main

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose build
docker-compose up -d
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [GNU General Public License v2.0](LICENSE).

## üîó –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä–∫–æ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
- **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: [zlsl/flibusta](https://github.com/zlsl/flibusta)
- **–ê–≤—Ç–æ—Ä –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**: [@zlsl](https://github.com/zlsl)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ –≤–∫–ª–∞–¥—ã! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –∏ Pull Requests.

### –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–¥—ã
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ OPDS-PSE –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (ISBN, –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—É–¥–∏–æ–∫–Ω–∏–≥
- [ ] API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## ‚ö†Ô∏è –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–ø–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –§–ª–∏–±—É—Å—Ç—ã. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —Å–æ–±–ª—é–¥–∞–µ—Ç–µ –≤—Å–µ –ø—Ä–∏–º–µ–Ω–∏–º—ã–µ –∑–∞–∫–æ–Ω—ã –æ–± –∞–≤—Ç–æ—Ä—Å–∫–æ–º –ø—Ä–∞–≤–µ –≤ –≤–∞—à–µ–π —é—Ä–∏—Å–¥–∏–∫—Ü–∏–∏.


